<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Spam Detection Challenge - AICodingGym</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #faf8f5;
            --bg-card: #ffffff;
            --bg-code: #1e1e2e;
            --accent: #e87b35;
            --accent-hover: #d06a28;
            --accent-light: rgba(232, 123, 53, 0.1);
            --text-primary: #1a1a2e;
            --text-secondary: #6b7280;
            --text-muted: #9ca3af;
            --border: #e8e5e0;
            --border-light: #f0ede8;
            --tag-bg: #f3f0eb;
            --tag-text: #5a5a5a;
            --success: #22c55e;
            --success-bg: rgba(34, 197, 94, 0.1);
            --error: #ef4444;
            --error-bg: rgba(239, 68, 68, 0.1);
            --warning: #f59e0b;
            --code-green: #a6e3a1;
            --code-blue: #89b4fa;
            --code-purple: #cba6f7;
            --code-yellow: #f9e2af;
            --code-comment: #6c7086;
            --code-text: #cdd6f4;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--bg-primary);
            -webkit-font-smoothing: antialiased;
        }

        /* ─── Navigation ─── */
        .navbar {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border);
            padding: 0 32px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 32px;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            font-weight: 700;
            font-size: 18px;
            color: var(--text-primary);
        }

        .nav-logo-icon {
            width: 36px;
            height: 36px;
            background: var(--accent);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }

        .nav-links {
            display: flex;
            gap: 24px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-size: 14px;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover, .nav-links a.active {
            color: var(--text-primary);
        }

        .nav-right .login-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-right .login-btn:hover {
            background: var(--bg-primary);
            border-color: var(--text-muted);
        }

        /* ─── Page Header ─── */
        .page-header {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 32px 0;
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-muted);
            margin-bottom: 24px;
        }

        .breadcrumb a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .breadcrumb a:hover {
            color: var(--accent);
        }

        .breadcrumb .separator {
            color: var(--text-muted);
        }

        .challenge-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 32px;
        }

        .challenge-header-left h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .challenge-meta {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .tag {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 100px;
            font-size: 12px;
            font-weight: 500;
            gap: 4px;
        }

        .tag-category {
            background: var(--accent-light);
            color: var(--accent);
            border: 1px solid rgba(232, 123, 53, 0.2);
        }

        .tag-difficulty {
            background: rgba(245, 158, 11, 0.1);
            color: #b45309;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }

        .tag-default {
            background: var(--tag-bg);
            color: var(--tag-text);
            border: 1px solid var(--border-light);
        }

        .tag-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
        }

        .progress-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 13px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .progress-bar-mini {
            width: 80px;
            height: 6px;
            background: var(--border-light);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar-mini-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* ─── Main Layout ─── */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 32px 60px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        /* ─── Left Panel (Challenge Info) ─── */
        .challenge-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .card-header {
            padding: 20px 24px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-header-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .card-header h2 {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-body {
            padding: 16px 24px 24px;
        }

        .card-body p {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* ─── Dataset Stats ─── */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

        .stat-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
        }

        .stat-value {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
            margin-top: 4px;
        }

        /* ─── Examples ─── */
        .examples-section {
            margin-top: 8px;
        }

        .examples-section h3 {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .example-block {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 10px;
        }

        .example-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .example-label.spam {
            color: var(--error);
        }

        .example-label.ham {
            color: var(--success);
        }

        .example-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.6;
            white-space: pre-wrap;
            word-break: break-word;
        }

        /* ─── Scoring Breakdown ─── */
        .scoring-table {
            width: 100%;
            margin-top: 12px;
            border-collapse: collapse;
        }

        .scoring-table th {
            text-align: left;
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 600;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .scoring-table td {
            padding: 10px 0;
            font-size: 14px;
            border-bottom: 1px solid var(--border-light);
        }

        .scoring-table tr:last-child td {
            border-bottom: none;
            font-weight: 600;
        }

        .scoring-table .pts {
            text-align: right;
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--accent);
        }

        /* ─── Right Panel (Code / Submit) ─── */
        .code-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .code-editor {
            background: var(--bg-code);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 24px rgba(0,0,0,0.12);
        }

        .code-editor-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 20px;
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .code-editor-dots {
            display: flex;
            gap: 8px;
        }

        .code-editor-dots span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot-red { background: #ff5f57; }
        .dot-yellow { background: #febc2e; }
        .dot-green { background: #28c840; }

        .code-editor-tab {
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .code-editor-tab .file-icon {
            color: var(--code-blue);
        }

        .code-editor-actions {
            display: flex;
            gap: 8px;
        }

        .btn-run {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: rgba(166, 227, 161, 0.1);
            border: 1px solid rgba(166, 227, 161, 0.2);
            border-radius: 6px;
            color: var(--code-green);
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-run:hover {
            background: rgba(166, 227, 161, 0.18);
        }

        .code-editor-body {
            padding: 20px;
            min-height: 280px;
        }

        .code-line {
            display: flex;
            line-height: 1.8;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
        }

        .line-number {
            color: #45475a;
            width: 36px;
            text-align: right;
            margin-right: 20px;
            user-select: none;
            flex-shrink: 0;
        }

        .line-content {
            color: var(--code-text);
        }

        .code-comment { color: var(--code-comment); font-style: italic; }
        .code-keyword { color: var(--code-purple); }
        .code-function { color: var(--code-blue); }
        .code-string { color: var(--code-green); }
        .code-type { color: var(--code-yellow); }
        .code-operator { color: #89dceb; }

        /* ─── Download Cards ─── */
        .download-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .download-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 14px;
            text-decoration: none;
            color: var(--text-primary);
            transition: all 0.2s;
            cursor: pointer;
        }

        .download-card:hover {
            border-color: var(--accent);
            box-shadow: 0 2px 12px rgba(232, 123, 53, 0.08);
            transform: translateY(-1px);
        }

        .download-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .download-icon.train {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .download-icon.test {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .download-icon.script {
            background: rgba(168, 85, 247, 0.1);
            color: #a855f7;
        }

        .download-card-info h4 {
            font-size: 14px;
            font-weight: 600;
        }

        .download-card-info p {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* ─── Submission Section ─── */
        .submit-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .submit-header {
            padding: 20px 24px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .submit-header h2 {
            font-size: 16px;
            font-weight: 600;
        }

        .upload-zone {
            margin: 16px 24px 24px;
            border: 2px dashed var(--border);
            border-radius: 10px;
            padding: 32px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-zone:hover, .upload-zone.dragover {
            border-color: var(--accent);
            background: var(--accent-light);
        }

        .upload-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 12px;
            background: var(--accent-light);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            color: var(--accent);
        }

        .upload-zone h3 {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .upload-zone p {
            font-size: 13px;
            color: var(--text-muted);
        }

        .upload-zone .browse-link {
            color: var(--accent);
            font-weight: 600;
            cursor: pointer;
        }

        .file-list {
            margin: 0 24px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 14px;
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .file-item-left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-item-icon {
            font-size: 16px;
        }

        .file-item-name {
            font-size: 13px;
            font-weight: 500;
        }

        .file-item-size {
            font-size: 12px;
            color: var(--text-muted);
        }

        .file-item .remove-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 4px;
            font-size: 16px;
            line-height: 1;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .file-item .remove-btn:hover {
            color: var(--error);
            background: var(--error-bg);
        }

        .submit-actions {
            padding: 16px 24px 24px;
        }

        .btn-primary {
            width: 100%;
            padding: 12px 24px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--accent-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(232, 123, 53, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-primary.loading {
            pointer-events: none;
        }

        .btn-secondary {
            padding: 10px 20px;
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary:hover {
            background: var(--bg-primary);
            border-color: var(--text-muted);
        }

        /* ─── Results ─── */
        .results-banner {
            margin: 12px 24px 0;
            padding: 14px 16px;
            border-radius: 10px;
            display: none;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            font-weight: 500;
        }

        .results-banner.success {
            display: flex;
            background: var(--success-bg);
            color: #166534;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .results-banner.error {
            display: flex;
            background: var(--error-bg);
            color: #991b1b;
            border: 1px solid rgba(239, 68, 68, 0.2);
        }

        .results-icon {
            font-size: 18px;
            flex-shrink: 0;
        }

        /* ─── Deliverables Checklist ─── */
        .checklist {
            list-style: none;
            margin-top: 12px;
        }

        .checklist li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 0;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .checklist-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--accent-light);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 2px;
            font-size: 11px;
            color: var(--accent);
            font-weight: 700;
        }

        .checklist code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            background: var(--tag-bg);
            padding: 2px 6px;
            border-radius: 4px;
            color: var(--accent);
        }

        /* ─── Footer ─── */
        .footer {
            max-width: 1200px;
            margin: 0 auto;
            padding: 24px 32px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid var(--border);
        }

        .footer-left {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-muted);
        }

        .footer-links {
            display: flex;
            gap: 20px;
        }

        .footer-links a {
            font-size: 13px;
            color: var(--text-muted);
            text-decoration: none;
            transition: color 0.2s;
        }

        .footer-links a:hover {
            color: var(--text-primary);
        }

        /* ─── Spinner ─── */
        .spinner {
            width: 18px;
            height: 18px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ─── Responsive ─── */
        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .challenge-header {
                flex-direction: column;
                gap: 16px;
            }
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            .download-cards {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            .navbar { padding: 0 16px; }
            .nav-links { display: none; }
            .page-header { padding: 24px 16px 0; }
            .main-content { padding: 0 16px 40px; }
            .stats-grid { grid-template-columns: 1fr; }
            .challenge-header-left h1 { font-size: 22px; }
        }

        /* ─── Hidden ─── */
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <!-- ═══════ Navigation ═══════ -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="#" class="nav-logo">
                <div class="nav-logo-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                </div>
                AICodingGym
            </a>
            <div class="nav-links">
                <a href="#" class="active">Challenges</a>
                <a href="#">Leaderboard</a>
                <a href="#">Blog</a>
            </div>
        </div>
        <div class="nav-right">
            <a href="#" class="login-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                Login with GitHub
            </a>
        </div>
    </nav>

    <!-- ═══════ Page Header ═══════ -->
    <div class="page-header">
        <div class="breadcrumb">
            <a href="#">Challenges</a>
            <span class="separator">/</span>
            <span>Email Spam Detection</span>
        </div>
        <div class="challenge-header">
            <div class="challenge-header-left">
                <h1>Email Spam Detection</h1>
                <div class="challenge-meta">
                    <span class="tag tag-category">
                        <span class="tag-dot" style="background: var(--accent);"></span>
                        Machine Learning
                    </span>
                    <span class="tag tag-difficulty">
                        <span class="tag-dot" style="background: #f59e0b;"></span>
                        Medium
                    </span>
                    <span class="tag tag-default">NLP</span>
                    <span class="tag tag-default">Classification</span>
                    <span class="tag tag-default">Scikit-Learn</span>
                </div>
            </div>
            <div class="progress-badge">
                <span>Progress</span>
                <div class="progress-bar-mini">
                    <div class="progress-bar-mini-fill" style="width: 0%;" id="progressFill"></div>
                </div>
                <span id="progressText">0%</span>
            </div>
        </div>
    </div>

    <!-- ═══════ Main Content ═══════ -->
    <div class="main-content">

        <!-- ─── Left Panel ─── -->
        <div class="challenge-panel">

            <!-- Challenge Description -->
            <div class="card">
                <div class="card-header">
                    <div class="card-header-icon" style="background: var(--accent-light); color: var(--accent);">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
                    </div>
                    <h2>Challenge</h2>
                </div>
                <div class="card-body">
                    <p>Build a binary classifier to detect spam emails. Train on a real dataset from the Enron email corpus containing ~5,000 emails labeled as <strong>spam</strong> or <strong>ham</strong> (legitimate). Your goal is to achieve <strong>&ge;93% accuracy</strong> on the held-out test set.</p>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">4,136</div>
                            <div class="stat-label">Training Emails</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">1,035</div>
                            <div class="stat-label">Test Emails</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">&ge;93%</div>
                            <div class="stat-label">Target Accuracy</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Examples -->
            <div class="card">
                <div class="card-header">
                    <div class="card-header-icon" style="background: rgba(59,130,246,0.1); color: #3b82f6;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                    </div>
                    <h2>Examples</h2>
                </div>
                <div class="card-body">
                    <div class="examples-section">
                        <div class="example-block">
                            <div class="example-label spam">Spam</div>
                            <div class="example-text">Subject: liffe is great
hello, vlsit our medsbymail shop and save
over 80% ... you will be pieasantly
surprised with our prlces!</div>
                        </div>
                        <div class="example-block">
                            <div class="example-label ham">Ham</div>
                            <div class="example-text">Subject: conoco - big cowboy
darren: i'm not sure if you can help me
with this, but for april and may, we have
gas pathed on deal 133304 to conoco...</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Scoring -->
            <div class="card">
                <div class="card-header">
                    <div class="card-header-icon" style="background: rgba(168,85,247,0.1); color: #a855f7;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20V10"/><path d="M18 20V4"/><path d="M6 20v-4"/></svg>
                    </div>
                    <h2>Scoring Breakdown</h2>
                </div>
                <div class="card-body">
                    <table class="scoring-table">
                        <thead>
                            <tr>
                                <th>Criteria</th>
                                <th class="pts">Points</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>File Validation (classifier.py, model, predictions)</td>
                                <td class="pts">20</td>
                            </tr>
                            <tr>
                                <td>Accuracy (&ge;95% = 50, &ge;93% = 40, &ge;91% = 30 ...)</td>
                                <td class="pts">50</td>
                            </tr>
                            <tr>
                                <td>Spam Precision &amp; Recall (&gt;0.90 each)</td>
                                <td class="pts">20</td>
                            </tr>
                            <tr>
                                <td>Code Quality (preprocessing, tuning, features)</td>
                                <td class="pts">10</td>
                            </tr>
                            <tr>
                                <td><strong>Total (pass &ge; 80)</strong></td>
                                <td class="pts">100</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Deliverables -->
            <div class="card">
                <div class="card-header">
                    <div class="card-header-icon" style="background: rgba(34,197,94,0.1); color: var(--success);">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                    </div>
                    <h2>Deliverables</h2>
                </div>
                <div class="card-body">
                    <ul class="checklist">
                        <li>
                            <span class="checklist-icon">1</span>
                            <span><code>classifier.py</code> &mdash; Your training and prediction code</span>
                        </li>
                        <li>
                            <span class="checklist-icon">2</span>
                            <span><code>model.pkl</code> or <code>model/</code> &mdash; Your saved trained model</span>
                        </li>
                        <li>
                            <span class="checklist-icon">3</span>
                            <span><code>predictions.csv</code> &mdash; Predictions on test set</span>
                        </li>
                        <li>
                            <span class="checklist-icon">4</span>
                            <span><code>report.txt</code> &mdash; Single line with your test accuracy</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ─── Right Panel ─── -->
        <div class="code-panel">

            <!-- Code Editor -->
            <div class="code-editor">
                <div class="code-editor-header">
                    <div class="code-editor-dots">
                        <span class="dot-red"></span>
                        <span class="dot-yellow"></span>
                        <span class="dot-green"></span>
                    </div>
                    <div class="code-editor-tab">
                        <span class="file-icon">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
                        </span>
                        classifier.py
                    </div>
                    <div class="code-editor-actions">
                        <button class="btn-run" title="Run">
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                            Run
                        </button>
                    </div>
                </div>
                <div class="code-editor-body">
                    <div class="code-line"><span class="line-number">1</span><span class="line-content"><span class="code-comment"># Build your spam classifier here</span></span></div>
                    <div class="code-line"><span class="line-number">2</span><span class="line-content"><span class="code-comment"># Train on spam_train.csv, predict on spam_test.csv</span></span></div>
                    <div class="code-line"><span class="line-number">3</span><span class="line-content"></span></div>
                    <div class="code-line"><span class="line-number">4</span><span class="line-content"><span class="code-keyword">import</span> pandas <span class="code-keyword">as</span> pd</span></div>
                    <div class="code-line"><span class="line-number">5</span><span class="line-content"><span class="code-keyword">from</span> sklearn.feature_extraction.text <span class="code-keyword">import</span> TfidfVectorizer</span></div>
                    <div class="code-line"><span class="line-number">6</span><span class="line-content"><span class="code-keyword">from</span> sklearn.naive_bayes <span class="code-keyword">import</span> MultinomialNB</span></div>
                    <div class="code-line"><span class="line-number">7</span><span class="line-content"></span></div>
                    <div class="code-line"><span class="line-number">8</span><span class="line-content"><span class="code-keyword">def</span> <span class="code-function">train_and_predict</span>():</span></div>
                    <div class="code-line"><span class="line-number">9</span><span class="line-content">    <span class="code-string">"""</span></span></div>
                    <div class="code-line"><span class="line-number">10</span><span class="line-content">    <span class="code-string">Write your solution here.</span></span></div>
                    <div class="code-line"><span class="line-number">11</span><span class="line-content">    <span class="code-string">Target: >=93% accuracy</span></span></div>
                    <div class="code-line"><span class="line-number">12</span><span class="line-content">    <span class="code-string">"""</span></span></div>
                    <div class="code-line"><span class="line-number">13</span><span class="line-content">    <span class="code-keyword">pass</span></span></div>
                </div>
            </div>

            <!-- Downloads -->
            <div class="download-cards">
                <a href="spam_train.csv" download class="download-card">
                    <div class="download-icon train">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </div>
                    <div class="download-card-info">
                        <h4>Training Data</h4>
                        <p>spam_train.csv &middot; 4,136 rows</p>
                    </div>
                </a>
                <a href="spam_test.csv" download class="download-card">
                    <div class="download-icon test">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    </div>
                    <div class="download-card-info">
                        <h4>Test Data</h4>
                        <p>spam_test.csv &middot; 1,035 rows</p>
                    </div>
                </a>
                <a href="check_submission.py" download class="download-card" style="grid-column: 1 / -1;">
                    <div class="download-icon script">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                    </div>
                    <div class="download-card-info">
                        <h4>Validation Script</h4>
                        <p>check_submission.py &middot; Run locally before submitting</p>
                    </div>
                </a>
            </div>

            <!-- Submit -->
            <div class="submit-card">
                <div class="submit-header">
                    <div class="card-header-icon" style="background: var(--accent-light); color: var(--accent);">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                    </div>
                    <h2>Submit Solution</h2>
                </div>

                <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
                    <div class="upload-icon">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                    </div>
                    <h3>Drop files here or <span class="browse-link">browse</span></h3>
                    <p>Upload classifier.py and model.pkl</p>
                </div>
                <input type="file" id="fileInput" multiple accept=".py,.pkl,.csv,.txt" style="display:none;">

                <div id="fileList" class="file-list"></div>

                <div id="results" class="results-banner"></div>

                <div class="submit-actions">
                    <button class="btn-primary" id="submitBtn" onclick="submitFiles()" disabled>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>
                        Submit for Grading
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- ═══════ Footer ═══════ -->
    <footer class="footer">
        <div class="footer-left">
            <div class="nav-logo-icon" style="width:24px; height:24px; border-radius:6px; font-size:12px;">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
            </div>
            AICodingGym &copy; 2026
        </div>
        <div class="footer-links">
            <a href="#">Twitter</a>
            <a href="#">GitHub</a>
            <a href="#">Discord</a>
        </div>
    </footer>

    <script>
        // ═══════════════════════════════════════════════════════════
        //  File Upload & Submission Logic
        // ═══════════════════════════════════════════════════════════
        const fileInput = document.getElementById('fileInput');
        const fileListEl = document.getElementById('fileList');
        const submitBtn = document.getElementById('submitBtn');
        const resultsDiv = document.getElementById('results');
        const uploadZone = document.getElementById('uploadZone');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');

        let selectedFiles = [];

        // Drag and drop
        uploadZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        });
        uploadZone.addEventListener('dragleave', () => {
            uploadZone.classList.remove('dragover');
        });
        uploadZone.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            selectedFiles = [...selectedFiles, ...files];
            displayFiles();
        });

        fileInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            selectedFiles = [...selectedFiles, ...files];
            displayFiles();
            fileInput.value = '';
        });

        function getFileIcon(name) {
            if (name.endsWith('.py')) return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#3b82f6" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>';
            if (name.endsWith('.pkl')) return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#a855f7" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>';
            if (name.endsWith('.csv')) return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#22c55e" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/></svg>';
            return '<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>';
        }

        function displayFiles() {
            if (selectedFiles.length === 0) {
                fileListEl.innerHTML = '';
                submitBtn.disabled = true;
                updateProgress(0);
                return;
            }

            fileListEl.innerHTML = '';
            selectedFiles.forEach((file, index) => {
                const div = document.createElement('div');
                div.className = 'file-item';
                div.innerHTML = `
                    <div class="file-item-left">
                        <span class="file-item-icon">${getFileIcon(file.name)}</span>
                        <span class="file-item-name">${file.name}</span>
                        <span class="file-item-size">${(file.size / 1024).toFixed(1)} KB</span>
                    </div>
                    <button class="remove-btn" onclick="removeFile(${index})" title="Remove">&times;</button>
                `;
                fileListEl.appendChild(div);
            });

            submitBtn.disabled = false;
            updateProgress(25);
        }

        function removeFile(index) {
            selectedFiles.splice(index, 1);
            displayFiles();
        }

        function updateProgress(pct) {
            progressFill.style.width = pct + '%';
            progressText.textContent = pct + '%';
        }

        async function submitFiles() {
            if (selectedFiles.length === 0) return;

            const hasClassifier = selectedFiles.some(f => f.name === 'classifier.py');
            const hasModel = selectedFiles.some(f => f.name === 'model.pkl' || f.name.includes('model'));

            if (!hasClassifier) {
                showResult('Missing classifier.py file. Please include it in your submission.', 'error');
                return;
            }

            if (!hasModel) {
                showResult('Missing model.pkl file. Please include your trained model.', 'error');
                return;
            }

            const formData = new FormData();
            selectedFiles.forEach(file => formData.append('files', file));

            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class="spinner"></div> Grading...';
            updateProgress(50);

            try {
                const response = await fetch('/api/grade', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (result.passed) {
                    const pct = (result.accuracy * 100).toFixed(2);
                    showResult(
                        `<span class="results-icon">&#10003;</span> Passed! Score: ${result.total_score}/100 &middot; Accuracy: ${pct}%`,
                        'success'
                    );
                    updateProgress(100);
                } else {
                    const pct = result.accuracy ? (result.accuracy * 100).toFixed(2) : '??';
                    showResult(
                        `<span class="results-icon">&#10007;</span> Not passing. Score: ${result.total_score}/100 &middot; Accuracy: ${pct}% (need &ge;93%)`,
                        'error'
                    );
                    updateProgress(50);
                }
            } catch (error) {
                showResult(
                    `<span class="results-icon">&#9888;</span> Error: ${error.message}`,
                    'error'
                );
                updateProgress(25);
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = `
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>
                    Submit for Grading
                `;
            }
        }

        function showResult(message, type) {
            resultsDiv.innerHTML = message;
            resultsDiv.className = 'results-banner ' + type;
            resultsDiv.style.display = 'flex';
        }
    </script>
</body>
</html>
